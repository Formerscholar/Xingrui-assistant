(self["webpackChunkstraight"]=self["webpackChunkstraight"]||[]).push([[639],{7608:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});r(8309);var n=r(5166),a=(0,n.withScopeId)("data-v-1fa0a2f3");(0,n.pushScopeId)("data-v-1fa0a2f3");var o={id:"School"},c={class:"title_box"},i=(0,n.createTextVNode)("新增校区"),u={class:"search_box"},l=(0,n.createVNode)("i",{class:"el-input__icon el-icon-search"},null,-1),s=(0,n.createTextVNode)("搜索"),d=(0,n.createTextVNode)("取消"),f=(0,n.createTextVNode)("确定"),p=(0,n.createVNode)("span",null,"确定删除校区，继续此操作？",-1),h={class:"dialog-footer"},m=(0,n.createTextVNode)("取 消"),g=(0,n.createTextVNode)("确 定");(0,n.popScopeId)();var v=a((function(e,t,r,_,v,b){var V=(0,n.resolveComponent)("el-button"),y=(0,n.resolveComponent)("el-cascader"),k=(0,n.resolveComponent)("el-form-item"),w=(0,n.resolveComponent)("el-input"),N=(0,n.resolveComponent)("el-form"),C=(0,n.resolveComponent)("el-table-column"),S=(0,n.resolveComponent)("el-image"),x=(0,n.resolveComponent)("el-table"),O=(0,n.resolveComponent)("el-pagination"),T=(0,n.resolveComponent)("el-dialog");return(0,n.openBlock)(),(0,n.createBlock)("div",o,[(0,n.createVNode)("div",c,[(0,n.createVNode)(V,{class:"newstud",type:"primary",onClick:_.showAddSchoolDialog},{default:a((function(){return[i]})),_:1},8,["onClick"])]),(0,n.createVNode)("div",u,[(0,n.createVNode)(N,{model:e.search_data,ref:"search_school_ref",inline:!0},{default:a((function(){return[(0,n.createVNode)(k,null,{default:a((function(){return[(0,n.createVNode)(y,{options:e.area_data,props:e.cascader_props,placeholder:"请选择省/市/区",style:{width:"20rem"},ref:"search_area_ref",clearable:""},null,8,["options","props"])]})),_:1}),(0,n.createVNode)(k,null,{default:a((function(){return[(0,n.createVNode)(w,{class:"searchtxt",placeholder:"输入校区名称",modelValue:e.search_data.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.search_data.keyword=t})},{prefix:a((function(){return[l]})),_:1},8,["modelValue"])]})),_:1}),(0,n.createVNode)(k,null,{default:a((function(){return[(0,n.createVNode)(V,{class:"searchbtn",type:"primary",onClick:_.searchSchool},{default:a((function(){return[s]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]),(0,n.createVNode)(x,{ref:"multipleTable",data:e.tableData,"tooltip-effect":"dark",style:{width:"99%"}},{default:a((function(){return[(0,n.createVNode)(C,{prop:"name",label:"校区名称",width:"155"}),(0,n.createVNode)(C,{prop:"address",label:"地址"}),(0,n.createVNode)(C,{align:"right"},{default:a((function(e){return[(0,n.createVNode)(S,{style:{display:"inline-block","vertical-align":"middle","margin-right":"1rem",cursor:"pointer"},onClick:function(t){return _.handleEdit(e.$index,e.row)},src:"https://aictb.oss-cn-shanghai.aliyuncs.com/straight/edit_icon.png"},null,8,["onClick"]),(0,n.createVNode)(S,{style:{display:"inline-block","vertical-align":"middle","margin-right":"1rem",cursor:"pointer"},onClick:function(t){return _.handleDelete(e.$index,e.row)},src:"https://aictb.oss-cn-shanghai.aliyuncs.com/straight/delete_icon.png"},null,8,["onClick"])]})),_:1})]})),_:1},8,["data"]),(0,n.createVNode)(O,{class:"pagina",onSizeChange:_.handleSizeChange,onCurrentChange:_.handleCurrentChange,"current-page":e.Idata.page,"page-size":e.limit,layout:"prev, pager, next, jumper","page-count":e.Idata.total_page},null,8,["onSizeChange","onCurrentChange","current-page","page-size","page-count"]),(0,n.createVNode)(T,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.dialogVisible=t}),width:"30rem",center:""},{footer:a((function(){return[(0,n.createVNode)(k,null,{default:a((function(){return[(0,n.createVNode)(V,{onClick:t[5]||(t[5]=function(t){return e.dialogVisible=!1})},{default:a((function(){return[d]})),_:1}),(0,n.createVNode)(V,{type:"primary",onClick:_.doAddSchool},{default:a((function(){return[f]})),_:1},8,["onClick"])]})),_:1})]})),default:a((function(){return[(0,n.createVNode)(N,{model:e.school_data,rules:e.rules,ref:"school_ref","label-width":"100px"},{default:a((function(){return[(0,n.createVNode)(k,{label:"校区名称",prop:"name"},{default:a((function(){return[(0,n.createVNode)(w,{modelValue:e.school_data.name,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.school_data.name=t}),placeholder:"请输入校区名称",style:{width:"16rem"}},null,8,["modelValue"])]})),_:1}),(0,n.createVNode)(k,{label:"地址"},{default:a((function(){return[(0,n.createVNode)(w,{modelValue:e.school_data.address,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.school_data.address=t}),placeholder:"请输入校区地址",style:{width:"16rem"}},null,8,["modelValue"])]})),_:1}),(0,n.createVNode)(k,{label:"省/市/区"},{default:a((function(){return[(0,n.createVNode)(y,{modelValue:_.areaIds,"onUpdate:modelValue":t[4]||(t[4]=function(e){return _.areaIds=e}),options:e.area_data,props:e.cascader_props,placeholder:"请选择省/市/区",ref:"area_ref"},null,8,["modelValue","options","props"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["title","modelValue"]),(0,n.createVNode)(T,{title:"温馨提示",modelValue:e.confirmShow,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.confirmShow=t}),width:"30rem",center:""},{footer:a((function(){return[(0,n.createVNode)("span",h,[(0,n.createVNode)(V,{onClick:t[7]||(t[7]=function(t){return e.confirmShow=!1})},{default:a((function(){return[m]})),_:1}),(0,n.createVNode)(V,{type:"primary",onClick:_.doDelete},{default:a((function(){return[g]})),_:1},8,["onClick"])])]})),default:a((function(){return[p]})),_:1},8,["modelValue"])])})),b=(r(7327),r(9554),r(1249),r(4747),r(4624)),V=(r(5666),r(7171)),y=r(1984);r(129);function k(e){return(0,y.W)({url:"/ins/school/index",params:e})}function w(e){return(0,y.W)({url:"/ins/school/delete",params:e})}function N(e){return(0,y.W)({method:"POST",url:"/ins/school/add",data:e})}function C(e){return(0,y.W)({method:"POST",url:"/ins/school/save",data:e})}var S=r(6681),x=r(4736),O=r(6564),T=r(2119),D={setup:function(){var e=(0,O.oR)(),t=(0,T.tv)(),r=(0,n.reactive)({Idata:{},tableData:[],confirmShow:!1,dialogTitle:"",dialogVisible:!1,search_school_ref:(0,n.ref)(),search_area_ref:(0,n.ref)(),school_ref:(0,n.ref)(),area_ref:(0,n.ref)(),school_data:{id:0,name:"",address:"",province:0,city:0,area:0},rules:{name:[{required:!0,message:"请输入校区名称",trigger:"blur"},{max:20,message:"最大长度限制20个字符",trigger:"blur"}]},area_data:[],cascader_props:{value:"id",label:"name",children:"child"},search_data:{province:0,city:0,area:0,keyword:""},page:1,limit:10,confirm_data:{id:""}});(0,n.onMounted)((function(){i(),o()}));var a=(0,n.computed)((function(){return[r.school_data.province,r.school_data.city,r.school_data.area]})),o=function(){var e=(0,V.Z)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,S.bg)({id:-1});case 2:t=e.sent,t.code,n=t.data,t.msg,r.area_data=c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(e){var t=JSON.parse(JSON.stringify(e));return t.filter((function(e){var r=t.filter((function(t){return e.id==t.parent_id}));return r.length>0&&(e.child=r),0==e.parent_id}))},i=function(){var e=(0,V.Z)(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k({page:r.page,limit:r.limit,keyword:r.search_data.keyword,province:r.search_data.province,city:r.search_data.city,area:r.search_data.area});case 2:t=e.sent,n=t.code,a=t.data,t.msg,0==n&&(r.Idata=a,r.tableData=a.list.map((function(e){return{id:e.id,name:e.name,add_time:e.add_time,address:e.address,province:e.province,city:e.city,area:e.area}})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e,t){r.confirm_data.id=t.id,r.confirmShow=!0},l=function(e,t){r.dialogTitle="编辑校区",r.dialogIsDelect=!1,r.dialogVisible=!0,r.school_data=(0,b.Z)({},t)},s=function(e,r){console.log(e,r,"跳转详情"),t.push("/student/detail/"+r.id)},d=function(e){var t="";return _.forEach(e,(function(e,r){t+=e.name+"|"})),t=t.substr(0,t.length-1),t},f=function(){r.school_data={id:0,name:"",address:"",province:0,city:0,area:0},r.dialogTitle="添加校区",r.dialogIsDelect=!1,r.dialogVisible=!0},p=function(){r.school_ref.validate(function(){var e=(0,V.Z)(regeneratorRuntime.mark((function e(t){var n,a,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=21;break}if(n=JSON.parse(JSON.stringify(r.school_data)),a=r.area_ref.getCheckedNodes(),a.length>0&&(n.province=a[0].pathValues[0],n.city=a[0].pathValues[1],n.area=a[0].pathValues[2]),!n.id){e.next=14;break}return e.next=7,C(n);case 7:o=e.sent,c=o.code,o.data,o.msg,c||(r.dialogVisible=!1,i()),e.next=21;break;case 14:return e.next=16,N(n);case 16:u=e.sent,l=u.code,u.data,u.msg,l||(r.dialogVisible=!1,i());case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},h=function(){var e=r.search_area_ref.getCheckedNodes();e.length>0?(r.search_data.province=e[0].pathValues[0],r.search_data.city=e[0].pathValues[1],r.search_data.area=e[0].pathValues[2]):(r.search_data.province=0,r.search_data.city=0,r.search_data.area=0),i()},m=function(){alert("修改每页显示数")},g=_.debounce((function(e){r.page=e,i()}),300),v=function(){var e=(0,V.Z)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w({id:r.confirm_data.id});case 2:t=e.sent,n=t.code,n||(r.confirmShow=!1,i());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.Z)((0,b.Z)({store:e},(0,n.toRefs)(r)),{},{handleDelete:u,handleEdit:l,mapName:d,setTimerType:x.ar,getschoolData:i,handleDetail:s,showAddSchoolDialog:f,areaIds:a,doAddSchool:p,searchSchool:h,handleSizeChange:m,handleCurrentChange:g,doDelete:v})}};D.render=v,D.__scopeId="data-v-1fa0a2f3";var W=D},8533:function(e,t,r){"use strict";var n=r(2092).forEach,a=r(9341),o=r(9207),c=a("forEach"),i=o("forEach");e.exports=c&&i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},9554:function(e,t,r){"use strict";var n=r(2109),a=r(8533);n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},1249:function(e,t,r){"use strict";var n=r(2109),a=r(2092).map,o=r(1194),c=r(9207),i=o("map"),u=c("map");n({target:"Array",proto:!0,forced:!i||!u},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},8309:function(e,t,r){var n=r(9781),a=r(3070).f,o=Function.prototype,c=o.toString,i=/^\s*function ([^ (]*)/,u="name";n&&!(u in o)&&a(o,u,{configurable:!0,get:function(){try{return c.call(this).match(i)[1]}catch(e){return""}}})},5003:function(e,t,r){var n=r(2109),a=r(7293),o=r(5656),c=r(1236).f,i=r(9781),u=a((function(){c(1)})),l=!i||u;n({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(e,t){return c(o(e),t)}})},9337:function(e,t,r){var n=r(2109),a=r(9781),o=r(3887),c=r(5656),i=r(1236),u=r(6135);n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=c(e),a=i.f,l=o(n),s={},d=0;while(l.length>d)r=a(n,t=l[d++]),void 0!==r&&u(s,t,r);return s}})},7941:function(e,t,r){var n=r(2109),a=r(7908),o=r(1956),c=r(7293),i=c((function(){o(1)}));n({target:"Object",stat:!0,forced:i},{keys:function(e){return o(a(e))}})},4747:function(e,t,r){var n=r(7854),a=r(8324),o=r(8533),c=r(8880);for(var i in a){var u=n[i],l=u&&u.prototype;if(l&&l.forEach!==o)try{c(l,"forEach",o)}catch(s){l.forEach=o}}},4624:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});r(2526),r(7327),r(9554),r(5003),r(9337),r(7941),r(4747);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},6681:function(e,t,r){"use strict";r.d(t,{bg:function(){return a},K$:function(){return o},Ft:function(){return c},tS:function(){return i},su:function(){return u},aq:function(){return l},TF:function(){return s},NZ:function(){return d},h4:function(){return f},Z:function(){return p},bN:function(){return h},Ki:function(){return m},DI:function(){return g},SE:function(){return _},U9:function(){return v},Ru:function(){return b}});var n=r(1984);r(129);function a(e){return(0,n.W)({url:"/ins/Block/getArea",params:e})}function o(e){return(0,n.W)({url:"/ins/Block/getSchoolList",params:e})}function c(e){return(0,n.W)({url:"/ins/Block/getSubjectList",params:e})}function i(e){return(0,n.W)({url:"/ins/Block/getCourseList",params:e})}function u(e){return(0,n.W)({url:"/ins/Block/getTeacherList",params:e})}function l(e){return(0,n.W)({url:"/ins/Block/getTeamList",params:e})}function s(e){return(0,n.W)({url:"/ins/Block/getStudentList",params:e})}function d(e){return(0,n.W)({url:"/ins/Block/getPaperList",params:e})}function f(e){return(0,n.W)({url:"/ins/Block/getPaperQuestionList",params:e})}function p(e){return(0,n.W)({url:"/ins/block/getChapterList",params:e})}function h(e){return(0,n.W)({url:"/ins/block/getKnowledgeByGradIds",params:e})}function m(e){return(0,n.W)({url:"/ins/block/getTypeBySubjectId",params:e})}function g(e){return(0,n.W)({url:"/ins/block/getAllRole",params:e})}function _(e){return(0,n.W)({url:"/ins/block/getAllBuyType",params:e})}function v(e){return(0,n.W)({url:"/ins/block/getAllTeacherTeam",params:e})}function b(e){return(0,n.W)({url:"/ins/block/getAllGrade",params:e})}}}]);